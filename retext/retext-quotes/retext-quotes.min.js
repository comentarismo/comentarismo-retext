!function(b,a){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define([],b):(typeof window!=='undefined'?a=window:typeof global!=='undefined'?a=global:typeof self!=='undefined'?a=self:a=this,a.retextQuotes=b())}(function(){return function a(b,c,e){function f(d,k){if(!c[d]){if(!b[d]){var i=typeof require=='function'&&require;if(!k&&i)return i(d,!0);if(g)return g(d,!0);var j=new Error("Cannot find module '"+d+"'");throw j.code='MODULE_NOT_FOUND',j}var h=c[d]={exports:{}};b[d][0].call(h.exports,function(c){var a=b[d][1][c];return f(a?a:c)},h,h.exports,a,b,c,e)}return c[d].exports}var g=typeof require=='function'&&require;for(var d=0;d<e.length;d++)f(e[d]);return f}({1:[function(d,k,l){'use strict';function j(g){function j(g,d){function j(j){function k(l,p,q){var k=a(l),c=i(k,f,e),j,m,n,o;if(!c)return;if((k==="'"||k==='’'||!c.type)&&h(c,g,l,p,q),c.type==='open'&&g.push(c),c.type==='apostrophe'?j=b==='smart'?'’':"'":(n=b==='smart'?e:f,j=n[(g.length+1)%n.length],j.length>1&&(j=j.charAt(c.type==='open'?0:1))),c.type==='close'&&g.pop(),j===k)return;o=c.type==='apostrophe'?c.type:'quote',b===c.style?m=d.warn('Expected `'+j+'` to be used at this '+'level of nesting, not `'+k+'`',l):m=d.warn('Expected a '+b+' '+o+': `'+j+'`, not `'+k+'`',l),m.source='retext-quotes',m.ruleId=o}var g=[];c(j,'PunctuationNode',k)}c(g,'ParagraphNode',j)}var d=g||{},b=d.preferred||'smart',e=d.smart||['“”','‘’'],f=d.straight||['"',"'"];return j}function i(a,b,c){return e(a,b,'straight')||e(a,c,'smart')}function e(d,e,f){var g=e.length,b=-1,a,c;while(++b<g){if(a=e[b],c=a.length>1,a.charAt(0)===d)return{style:f,type:c?'open':null,marker:a};if(c&&a.charAt(1)===d)return{style:f,type:'close',marker:a}}}function h(d,k,e,l,m){var h=m.children,i,j,c;if(!e||e.type!=='PunctuationNode')return;if(c=a(e),c==="'"||c==='’'){if(b('WordNode',m)){d.type='apostrophe';return}if(i=h[l-1],j=h[l+1],b('WordNode',i)){c=a(i),c.charAt(c.length-1).toLowerCase()==='s'&&f(k,d)?d.type='apostrophe':d.type='close';return}if(b('WordNode',j)){c=a(j),d.type=g.test(c)?'apostrophe':'open';return}}d.type=f(k,d)?'open':'close'}function f(a,b){return!a.length||a[a.length-1].marker!==b.marker}var a=d('nlcst-to-string'),c=d('unist-util-visit'),b=d('unist-util-is'),g=/^\d\ds$/;k.exports=j},{'nlcst-to-string':2,'unist-util-is':3,'unist-util-visit':4}],2:[function(c,b,d){'use strict';function a(b,g){var e=g||'',f,c,d;if(!(b&&('length'in b||b.type)))throw new Error('Expected node, not `'+b+'`');if(typeof b.value==='string')return b.value;if(d='length'in b?b:b.children,c=d.length,c===1&&'value'in d[0])return d[0].value;f=[];while(c--)f[c]=a(d[c],e);return f.join(e)}b.exports=a},{}],3:[function(i,c,j){'use strict';function b(i,e,c,d,j){var f=d!==null&&d!==undefined,g=c!==null&&c!==undefined,h=a(i);if(g&&(typeof c!=='number'||c<0||c===Infinity))throw new Error('Expected positive finite index or child node');if(f&&!(b(null,d)&&d.children))throw new Error('Expected parent node');if(!(e&&e.type)||typeof e.type!=='string')return!1;if(f!==g)throw new Error('Expected both parent and index');return Boolean(h.call(j,e,c,d))}function a(a){if(typeof a==='string')return d(a);if(a===null||a===undefined)return e;if(typeof a==='object')return('length'in a?f:h)(a);if(typeof a==='function')return a;throw new Error('Expected function, string, or object as test')}function g(d){var c=[],e=d.length,b=-1;while(++b<e)c[b]=a(d[b]);return c}function h(a){function b(c){var b;for(b in a)if(c[b]!==a[b])return!1;return!0}return b}function f(c){function d(){var c=-1;while(++c<b)if(a[c].apply(this,arguments))return!0;return!1}var a=g(c),b=a.length;return d}function d(a){function b(b){return Boolean(b&&b.type===a)}return b}function e(){return!0}c.exports=b},{}],4:[function(c,a,d){'use strict';function b(e,a,b,c){function d(c,d,g){var e;return d=d||(g?0:null),(!a||c.type===a)&&(e=b(c,d,g||null)),c.children&&e!==!1?f(c.children,c):e}function f(h,i){var b=c?-1:1,e=h.length,f=-1,a=(c?e:f)+b,g;while(a>f&&a<e){if(g=h[a],g&&d(g,a,i)===!1)return!1;a+=b}return!0}typeof a==='function'&&(c=b,b=a,a=null),d(e)}a.exports=b},{}]},{},[1])(1)})
